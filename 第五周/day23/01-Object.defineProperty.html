<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset='UTF-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Document</title>
</head>

<body></body>

</html>
<script>
    // Object.defineProperty
    /*
        Object.defineProperty 方法

        数据驱动视图
            - 数据 渲染的普通数据
            - 视图 页面结构
    */

    // 1. 渲染数据
    // const obj = {
    //     name: 'tom',
    //     age: 18
    // }
    // // 2. 视图
    // document.body.innerHTML = `你好, 我叫${obj.name}, 我今年${obj.age}`

    // // 如果数据修改了 , 希望再次渲染
    // obj.name = 'jack'
    // document.body.innerHTML = `你好, 我叫${obj.name}, 我今年${obj.age}`



    // 希望数据修改后，视图直接更改 ---- 数据驱动视图
    /*
        (静态方法) Object.defineProperty 数据劫持
            - 语法 Object.defineProperty(对象, 添加的属性, {配置项})
            - 作用 操作对象
            - 配置项
                -> value 添加的属性的属性值
                -> writable: true/false(默认) 设置的属性是否可以修改
                -> enumerable: true/false(默认) 设置的属性是否可以遍历
                -> configurable: true/ false(默认) 设置的属性是否可以删除
                -> get 属性的设置 (方法)  不允许使用writable和value这两个属性(如果使用，会直接报错)
                -> set 属性的获取 (方法)  不允许使用writable和value这两个属性(如果使用，会直接报错)
    */

    // const obj = { name: 'tom' }
    // Object.defineProperty(obj, 'age', {
    //     value: 18
    // })
    // obj.name = 'jack'
    // obj.age = 20 // 修改失败
    // // console.log(obj);
    // delete obj.age
    // console.log(obj);

    // ===================
    // writable
    // const obj = { name: 'tom' }
    // Object.defineProperty(obj, 'age', {
    //     value: 18,
    //     writable: true
    // })
    // obj.age = 20
    // console.log(obj);

    // ==================
    // enumerable
    // const obj = { name: 'tom' }
    // Object.defineProperty(obj, 'age', {
    //     value: 18,
    //     enumerable: true // 可以遍历
    // })
    // for (let k in obj) {
    //     console.log(k, obj[k]);
    // }

    // ===================
    // configurable
    // const obj = { name: 'tom' }
    // Object.defineProperty(obj, 'age', {
    //     value: 18,
    //     configurable: true // 可以遍历
    // })
    // delete obj.age
    // console.log(obj);

    // =================
    // get/set 定义属性被存取
    // const obj = { name: 'tom' }
    // Object.defineProperty(obj, 'age', {
    //     get() {
    //         // 获取
    //         console.log('get');
    //     },
    //     set() {
    //         // 设置
    //         console.log('set');
    //     }
    // })

    // // console.log(obj.age); // 只要获取， 就会自动触发get方法
    // obj.age = 19 // 只要设置，就会自动触发set方法


    // 通过get和set
    const obj = { name: 'tom' }
    let v = null
    Object.defineProperty(obj, 'age', {
        get() {
            // 获取
            console.log('get', v);
            return v
        },
        set(val) {
            // 设置
            // console.log('set', val);
            v = val
        }
    })

    obj.age = 20
    console.log(obj.age);



</script>