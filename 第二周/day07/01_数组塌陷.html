<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
</html>
<script>
  /*
    数组塌陷
        用数组的长度进行循环的时候，使用一些可以修改原数组长度（splice pop）的方法，就会引起数组的变化
  */

  // 需求 每次删除数组的最后一个数据，直到把数组清空
  //   var arr = [100, 200, 300, 400, 500, 600, 700, 800, 900]
  //   console.log("原数组", arr)

  //   for (var i = 0; i < arr.length; i++) {
  //     console.log(arr, i)
  //     arr.pop()
  //   }
  //   console.log(arr)

  /*
    i ===0    arr.length = 9   arr.pop()  ==>  arr.length = 8
    i ===1    arr.length = 8   arr.pop()  ==>  arr.length = 7
    i ===2    arr.length = 7   arr.pop()  ==>  arr.length = 6
    i ===3    arr.length = 6   arr.pop()  ==>  arr.length = 5
    i ===4    arr.length = 5   arr.pop()  ==>  arr.length = 4
    
    循环从0 开始， 到arr.length结束， 此刻  i已经 === arr.length 所以循环结束
    原因是因为  在删除的时候修改了数组长度，影响了循环的结束条件

    解决，让数组长度不要变 ==> 最开始的时候把数组长度当做一个固定的值存起来
  
  */

  //   var len = arr.length
  //   for (var i = 0; i < len; i++) {
  //     console.log(arr, i)
  //     arr.pop()
  //   }
  //   console.log("修改后", arr)

  // 需求 用 splice 实现 从开头的位置一个一个删数组的数据，直到清空数组
  var arr = [100, 200, 300, 400, 500, 600, 700, 800, 900]
  console.log("原数组", arr)
  //   for (var i = 0; i < arr.length; i++) {
  //     arr.splice(i, 1)
  //     console.log(arr, i)
  //   }
  //   console.log("删除后", arr)

  /*
    i === 0  arr.length === 9   ==> splice ===> arr.length === 8 
    i === 1  arr.length === 8   ==> splice ===> arr.length === 7 
    i === 2  arr.length === 7   ==> splice ===> arr.length === 6 

    随着循环，splice每次都会让数组长度变化
    解决
        1. 倒着循环 ： 删除是从前向后删除，所有倒着循环不会影响前面的数据
  */

  for (var i = arr.length - 1; i >= 0; i--) {
    arr.splice(i, 1)
    console.log(arr, i)
  }
  console.log("删除后", arr)
</script>
